#list of movies with their genre, year, and age rating
movies = [
#27 Movie options
    {"title": "The Shawshank Redemption", "genre": "Drama", "year": 90, "age_rating": "R"},
    {"title": "The Godfather", "genre": "Crime", "year": 70, "age_rating": "R"},
    {"title": "The Dark Knight", "genre": "Action", "year": 00, "age_rating": "PG-13"},
    {"title": "12 Angry Men", "genre": "Drama", "year": 50, "age_rating": "Not Rated"},
    {"title": "Schindler's List", "genre": "History", "year": 90, "age_rating": "R"},
    {"title": "Pulp Fiction", "genre": "Crime", "year": 90, "age_rating": "R"},
    {"title": "The Lord of the Rings: The Return of the King", "genre": "Fantasy", "year": 00, "age_rating": "PG-13"},
    {"title": "The Avengers", "genre": "Action", "year": 10, "age_rating": "PG-13"},
    {"title": "Inception", "genre": "Sci-Fi", "year": 10, "age_rating": "PG-13"},
    {"title": "Forrest Gump", "genre": "Drama", "year": 90, "age_rating": "PG-13"},
    {"title": "Frozen", "genre": "Animation", "year": 10, "age_rating": "PG"},
    {"title": "Finding Nemo", "genre": "Animation", "year": 00, "age_rating": "G"},
    {"title": "Spirited Away", "genre": "Animation", "year": 00, "age_rating": "PG"},
    {"title": "Parasite", "genre": "Thriller", "year": 10, "age_rating": "R"},
    {"title": "Am√©lie", "genre": "Romance", "year": 00, "age_rating": "R"},
    {"title": "La La Land", "genre": "Musical", "year": 10, "age_rating": "PG-13"},
    {"title": "Coco", "genre": "Animation", "year": 10, "age_rating": "PG"},
    {"title": "Whiplash", "genre": "Drama", "year": 10, "age_rating": "R"},
    {"title": "Get Out", "genre": "Horror", "year": 10, "age_rating": "R"},
    {"title": "The Lion King", "genre": "Animation", "year": 90, "age_rating": "G"},
    {"title": "The Incredibles 2", "genre": "Animation", "year": 10, "age_rating": "PG"},
    {"title": "Kiki's Delivery Service", "genre": "Animation", "year": 90, "age_rating": "G"},
    {"title": "Joker", "genre": "Drama", "year": 10, "age_rating": "R"},
    {"title": "Napolean Dynamite", "genre": "Comedy", "year": 00, "age_rating": "PG"},
    {"title": "Ex Machina", "genre": "Indie", "year": 10, "age_rating": "R"},
    {"title": "1917", "genre": "Thriller", "year": 10, "age_rating": "R"},
    {"title": "Spider-Man: Across the Spider-Verse", "genre": "Animation", "year": 20, "age_rating": "PG"},
    {"title": "Dune", "genre": "Action", "year": 10, "age_rating": "PG-13"},
    {"title": "Dune: Part Two", "genre": "Action", "year": 20, "age_rating": "PG-13"},
    {"title": "Alien", "genre": "Thriller", "year": 70, "age_rating": "R"},
]

#list of TV shows with their genre, year, and age rating
tvShows = [
    {"title": "Breaking Bad", "genre": "Drama", "year": 00, "age_rating": "R"},
    {"title": "Chernobyl", "genre": "Thriller", "year": 10, "age_rating": "R"},
    {"title": "Avatar: The Last Airbender", "genre": "Animation", "year": 00, "age_rating": "G"},
    {"title": "Game of Thrones", "genre": "Drama", "year": 10, "age_rating": "R"},
    {"title": "Fullmetal Alchemist: Brotherhood", "genre": "Animation", "year": 00, "age_rating": "PG-13"},
    {"title": "Sherlock", "genre": "Crime", "year": 10, "age_rating": "PG-13"},
    {"title": "Attack on Titan", "genre": "Animation", "year": 10, "age_rating": "R"},
    {"title": "The Office", "genre": "Comedy", "year": 00, "age_rating": "PG-13"},
    {"title": "Better Call Saul", "genre": "Drama", "year": 10, "age_rating": "R"},
    {"title": "Clarkson's Farm", "genre": "Comedy", "year": 20, "age_rating": "PG-13"},
    {"title": "Firefly", "genre": "Action", "year": 00, "age_rating": "PG-13"},
    {"title": "Gravity Fall", "genre": "Comedy", "year": 10, "age_rating": "PG"},
    {"title": "Cowboy Bebop", "genre": "Animation", "year": 90, "age_rating": "PG-13"},
    {"title": "Nathan for You", "genre": "Comedy", "year": 10, "age_rating": "PG-13"},
    {"title": "Friends", "genre": "Comedy", "year": 90, "age_rating": "PG-13"},
    {"title": "Dragon Ball Z", "genre": "Animation", "year": 90, "age_rating": "PG"},
    {"title": "Pride and Prejudice", "genre": "Drama", "year": 90, "age_rating": "PG"},
    {"title": "Twin Peaks", "genre": "Crime", "year": 90, "age_rating": "R"},
    {"title": "Narcos", "genre": "Crime", "year": 10, "age_rating": "R"},
    {"title": "Black Mirror", "genre": "Thriller", "year": 10, "age_rating": "R"},
    {"title": "The Penguin", "genre": "Crime", "year": 20, "age_rating": "R"},
    {"title": "Over the Garden Wall", "genre": "Animation", "year": 10, "age_rating": "PG"},
    {"title": "Battlestar Galactica", "genre": "Sci-Fi", "year": 00, "age_rating": "PG-13"},   
    {"title": "Mad Men", "genre": "Drama", "year": 00, "age_rating": "R"},
    {"title": "The Boys", "genre": "Action", "year": 20, "age_rating": "R"},
    {"title": "Invincible", "genre": "Animation", "year": 20, "age_rating": "R"},
    {"title": "The Adventures of Sherlock Holmes", "genre": "Crime", "year": 80, "age_rating": "PG"},
    {"title": "Monster", "genre": "Crime", "year": 00, "age_rating": "PG-13"},
    {"title": "The Mandalorian", "genre": "Action", "year": 20, "age_rating": "PG-13"},
    {"title": "House of Cards", "genre": "Drama", "year": 10, "age_rating": "R"},
]

#asks the user questions
def get_user_preferences():
    
    print("Welcome to the Mood Movie Recommendation System!")

    motv = input("Do you want to watch a movie or a TV show? (Enter 'movie' or 'tv show'): ").strip().lower()
    while motv not in ['movie', 'tv show']:
        motv = input("Invalid choice. Please enter 'movie' or 'tv show': ").strip().lower() 
    
    preferred_genres = input("What type of movie are you in the mood for? (Separate by comma ex: Drama, Action): ")
    preferred_genres = [genre.strip().capitalize() for genre in preferred_genres.split(',')]
    
    decade = int(input("What decade are you looking for? (ex: 70, 80, 90, 00, 10, 20): "))
    while decade not in [50, 70, 80, 90, 00, 10, 20]:
        decade = int(input("Invalid decade. Enter a valid decade (e.g., 70, 80, 90, 00, 10, 20): "))

    age_ratings = input("What age ratings do you prefer? (Separate by comma ex: G, PG, PG-13, R): ")
    age_ratings = [rating.strip().upper() for rating in age_ratings.split(',')]
    
    return motv, preferred_genres, decade, age_ratings

#filters the database based on the answers
def recommend_content(motv, preferred_genres, decade, age_ratings):
    recommended = []
    database = movies if motv == 'movie' else tvShows

    for content in database:
        if (content['genre'] in preferred_genres and
            content['year'] == decade and
            content['age_rating'] in age_ratings):
            recommended.append(content['title'])

    return recommended

#Returns the filtered movies to the user
def main():
    while True:  # Add a loop to allow rerunning the program
        motv, preferred_genres, decade, age_ratings = get_user_preferences()
        recommended = recommend_content(motv, preferred_genres, decade, age_ratings)
        if recommended:
            print(f"\nWe recommend watching these {motv}s!:")
            for title in recommended:
                print(title)
        else:
            print(f"\nNo {motv}s found that match your criteria.")

        # Ask the user if they want to rerun the program
        rerun = input("\nWould you like to make another search? (yes/no): ").strip().lower()
        while rerun not in ['yes', 'no']:
            rerun = input("Invalid input. Please enter 'yes' or 'no': ").strip().lower()

        if rerun == 'no':  # Exit the loop if the user chooses not to rerun
            print("Goodbye! Enjoy your movie or show!")
            break

if __name__ == "__main__":
    main()
